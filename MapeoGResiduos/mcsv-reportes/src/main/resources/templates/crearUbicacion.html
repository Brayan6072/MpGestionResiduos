<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Localización</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<h1>Agregar Localización</h1>
<form th:action="@{http://localhost:8099/contenedores/ubicaciones/addC}" th:object="${localizacionDTO}" method="POST">
    <div>
        <label for="contenedor_id">ID del Contenedor:</label>
        <input type="number" id="contenedor_id" name="contenedor_id" th:field="*{contenedor_id}" required>
    </div>
    <div>
        <label>IDs de Clasificación:</label>
        <div id="clasificacion-container">
            <!-- Iterar sobre la lista y generar campos dinámicamente -->
            <div th:each="clasificacion, iterStat : *{clasificacion_id}">
                <input type="number" th:field="*{clasificacion_id[__${iterStat.index}__]}" th:placeholder="'Clasificación ' + (${iterStat.index} + 1)">
                <button type="button" onclick="eliminarCampo(this)">Eliminar</button>
            </div>
        </div>
        <button type="button" onclick="agregarCampo()">Agregar Clasificación</button>
    </div>
    <button type="submit">Enviar</button>
</form>

<script>
    // Función para agregar un nuevo campo de clasificación
    function agregarCampo() {
        const container = document.getElementById("clasificacion-container");
        const index = container.children.length; // Obtener el número actual de campos
        const nuevoCampo = `
            <div>
                <input type="number" name="clasificacion_id[${index}]" placeholder="Clasificación ${index + 1}">
                <button type="button" onclick="eliminarCampo(this)">Eliminar</button>
            </div>
        `;
        container.insertAdjacentHTML("beforeend", nuevoCampo);
    }

    // Función para eliminar un campo de clasificación
    function eliminarCampo(boton) {
        const campo = boton.parentElement;
        campo.remove();
    }
</script>
</body>
</html>